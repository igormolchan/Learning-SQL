CREATE TABLE t_sale (
   id_sale NUMBER(10,0)GENERATED BY DEFAULT ON NULL AS IDENTITY START WITH 100000,
   num VARCHAR2(30),
   dt DATE NOT NULL,
   id_client NUMBER(10,0) NOT NULL,
   e_state VARCHAR2(10) NOT NULL,
   discount NUMBER(8,6) DEFAULT 0,
   summa NUMBER(14,2),
   nds NUMBER(14,2),
   PRIMARY KEY (id_sale)
)
PARTITION BY RANGE (dt) INTERVAL(NUMTOYMINTERVAL(1, 'MONTH'))
   SUBPARTITION BY RANGE (summa)
      SUBPARTITION TEMPLATE(
         SUBPARTITION s_low VALUES LESS THAN (1000),
         SUBPARTITION s_medium VALUES LESS THAN (5000),
         SUBPARTITION s_high VALUES LESS THAN(10000),
         SUBPARTITION s_huge VALUES LESS THAN (20000),
         SUBPARTITION s_ultimate VALUES LESS THAN (MAXVALUE)
      )( 
   PARTITION p0 VALUES LESS THAN (DATE '2019-01-01'),
   PARTITION p1 VALUES LESS THAN (DATE '2019-02-01'),
   PARTITION p2 VALUES LESS THAN (DATE '2019-03-01'),
   PARTITION p3 VALUES LESS THAN (DATE '2019-04-01') 
);
